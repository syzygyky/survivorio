<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="ROBOTS" content="NOINDEX,NOFOLLOW">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>
  Lottery Prize Exchange Simulator | Survivor.io
</title>
<style>
body,dialog {
  background-color: #222;
  color: #ddd;
}
input,select, button {
  background-color: #333;
  color: #ddd;
  border: solid 2px #aaa;
}
input[type="checkbox"] {
  accent-color: #333;
}
input[type="checkbox"]:not(:checked) {
  appearance: none;
  margin-bottom: 0;
  width: 1em;
  height: 1em;
  background: #333;
  border: solid 1px #555;
}
input[type="radio"] {
  accent-color: #333;
}
input[type="radio"]:not(:checked) {
  appearance: none;
  margin-bottom: 0;
  width: 1em;
  height: 1em;
  background: #333;
  border: solid 1px #555;
  border-radius: 50%;
}
input[type="number"] {
    -moz-appearance: textfield;
}
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.prizes input[type="number"] {
  width:3em;
}
label {
  white-space: nowrap;
}

.bold {
  font-weight: bold;
}

form {
  border: solid 1px #888;
}
.result {
  border-top: solid 1px #555;
  height: 1em;
}
</style>
</head>
<body>
  <div class="container">
    <form name="form1">
      <p>
        Ticket Price:
        <label><input type="radio" name="usage" value="3" checked>x3</label>
        <label><input type="radio" name="usage" value="2">x2</label>
        <label><input type="radio" name="usage" value="1">x1</label>
      </p>
      <fieldset class="prizes-field">
        <legend>Prizes</legend>
        <p>
          <label><input type="checkbox" name="last" checked>Last Prize</label>
        </p>
        <p class="prizes">
          <label>A: <input type="number" name="a"></label>
          <label>B: <input type="number" name="b"></label>
          <label>C: <input type="number" name="c"></label>
          <label>D: <input type="number" name="d"></label>
          <label>E: <input type="number" name="e"></label>
          <label>F: <input type="number" name="f"></label>
          <label>G: <input type="number" name="g"></label>
        </p>
      </fieldset>
      <button type="reset">Reset</button>
      <p class="result"></p>
    </form>
    <hr>
    <form name="form2">
      <p>
        Ticket Price:
        <label><input type="radio" name="usage" value="3" checked>x3</label>
        <label><input type="radio" name="usage" value="2">x2</label>
        <label><input type="radio" name="usage" value="1">x1</label>
      </p>
      <fieldset class="prizes-field">
        <legend>Prizes</legend>
        <p>
          <label><input type="checkbox" name="last" checked>Last Prize</label>
        </p>
        <p class="prizes">
          <label>A: <input type="number" name="a"></label>
          <label>B: <input type="number" name="b"></label>
          <label>C: <input type="number" name="c"></label>
          <label>D: <input type="number" name="d"></label>
          <label>E: <input type="number" name="e"></label>
          <label>F: <input type="number" name="f"></label>
          <label>G: <input type="number" name="g"></label>
        </p>
      </fieldset>
      <button type="reset">Reset</button>
      <p class="result"></p>
    </form>
  </div>
  <script>
    const exchangeTable = {
      a:[270,360,540],
      b:[90,180,270],
      c:[45,120,180],
      d:[27,90,135],
      e:[9,18,27],
      f:[9,18,27],
      g:[6,12,18]
    }
    function pointCalc(){
      const FORM = event.target.closest('form');
      const usage = Number(FORM.usage.value);
      const prizesInput = FORM.querySelectorAll('p.prizes input');
      const includeLastPrize = FORM.last.checked;
      const prizes = {};
      Array.from(prizesInput).forEach(elm=>{
        prizes[elm.name] = Number(elm.value);
      })

      let sum = 0;
      for(const key of Object.keys(prizes)){
        sum += exchangeTable[key][usage-1] * prizes[key];
      }
      if(includeLastPrize) sum += exchangeTable.a[usage-1];
      const ticket = Math.trunc(sum/3)/10;
      FORM.querySelector('.result').textContent = sum + ' (Ticket:' + ticket + ')';
    }
    document.form1.addEventListener('input',pointCalc);
    document.form2.addEventListener('input',pointCalc);
  </script>
</body>
</html>
